{"version":3,"file":"classList.js","sources":["pages/classList/classList.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NMaXN0L2NsYXNzTGlzdC52dWU"],"sourcesContent":["<template>\n\t<view class=\"classList\">\r\n\t\t<view class=\"loadingLayout\" v-show=\"!classList.length && !noData\">\r\n\t\t\t<!-- !classList.length长度为0的时候展示,,id如果对应有数据的话再显示 -->\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\n\t\t<view class=\"content\">\r\n\t\t\t<navigator :url=\"`/pages/preView/preView?id=${item._id}`\" class=\"item\" \r\n\t\t\tv-for=\"item in classList\" :key='item._id'>\r\n\t\t\t\t<!-- navigator页面链接 -->\r\n\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"loadingLayout\">\r\n\t\t\t<!-- !classList.length长度为0的时候展示,,id如果对应有数据的话再显示 -->\r\n\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\".safe-area-inset-bottom\">\r\n\t\t\t<!--防遮挡安全区 -->\r\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { apiGetClassList } from '@/api/apis.js'\r\nimport { onLoad,onReachBottom } from '@dcloudio/uni-app'//接受上一个页面传入的参数\nconst classList = ref([])\r\nconst noData=ref(false)//没有数据了,都加载完了\r\nconst querParams = {\r\n\tpageNum:1,\r\n\tpageSize:12,\r\n\tclassid:''\r\n}//用于存储接受到的id\r\n// 使用onLoad接收id\r\nonLoad((e) => {\r\n\tlet {id,name}=e\r\n\t// 导航栏标题改为name\r\n\tquerParams.classid = id;\r\n\tuni.setNavigationBarTitle({\r\n\t\ttitle:name\r\n\t})\r\n\tgetClassList()//复制完成后再进行执行\r\n\t\r\n})\r\n// 触底加载更多\r\nonReachBottom(() => {\r\n\tif(noData.value) return;//如果等于false就不请求了\r\n\tquerParams.pageNum++\r\n\tgetClassList()\r\n})\r\n// 获取网络列表\r\nconst getClassList = async() => {\r\n\tlet res = await apiGetClassList(querParams)\r\n\tclassList.value = [...classList.value ,...res.data.data]//进行展开解构拼接\r\n\t// 是否没有数据了\r\n\t\r\n\tif(res.data.data.length<querParams.pageSize){\r\n\t\tnoData.value = true\r\n\t}\r\n\t// 将数据存储到本地\r\n\tuni.setStorageSync(\"storgClassList\",classList.value)\r\n\t// console.log(classList.value);\r\n}\r\n\t\r\n\r\n\r\n\n</script>\n\n<style lang=\"scss\" scoped>\r\n\t// 网格布局\r\n\t.classList{\r\n\t.content{\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(3,1fr);\r\n\t\tgap: 5rpx;//间隙\r\n\t\tpadding: 5rpx;\r\n\t\t.item{\r\n\t\t\t\r\n\t\t\theight: 440rpx;\r\n\t\t\timage{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t}\n\n</style>\n","import MiniProgramPage from 'E:/uni-app练手/幻彩壁纸/pages/classList/classList.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onReachBottom","apiGetClassList"],"mappings":";;;;;;;;;;;;;;AA4BA,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,SAAOA,cAAG,IAAC,KAAK;AACtB,UAAM,aAAa;AAAA,MAClB,SAAQ;AAAA,MACR,UAAS;AAAA,MACT,SAAQ;AAAA,IACT;AAEAC,kBAAM,OAAC,CAAC,MAAM;AACb,UAAI,EAAC,IAAG,KAAI,IAAE;AAEd,iBAAW,UAAU;AACrBC,oBAAAA,MAAI,sBAAsB;AAAA,QACzB,OAAM;AAAA,MACR,CAAE;AACD,mBAAc;AAAA,IAEf,CAAC;AAEDC,kBAAAA,cAAc,MAAM;AACnB,UAAG,OAAO;AAAO;AACjB,iBAAW;AACX,mBAAc;AAAA,IACf,CAAC;AAED,UAAM,eAAe,YAAW;AAC/B,UAAI,MAAM,MAAMC,SAAe,gBAAC,UAAU;AAC1C,gBAAU,QAAQ,CAAC,GAAG,UAAU,OAAO,GAAG,IAAI,KAAK,IAAI;AAGvD,UAAG,IAAI,KAAK,KAAK,SAAO,WAAW,UAAS;AAC3C,eAAO,QAAQ;AAAA,MACf;AAEDF,oBAAAA,MAAI,eAAe,kBAAiB,UAAU,KAAK;AAAA,IAEpD;;;;;;;;;;;;;;;;;;;;;;AC/DA,GAAG,WAAW,eAAe;"}